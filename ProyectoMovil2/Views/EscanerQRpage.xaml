<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:zxing="clr-namespace:ZXing.Net.Maui.Controls;assembly=ZXing.Net.MAUI.Controls"
             xmlns:viewmodel="clr-namespace:ProyectoMovil2.ViewModels"
             x:Class="ProyectoMovil2.Views.EscanerQRpage"
             x:DataType="viewmodel:EscanerQRpageViewModel"
             Title="Escanear QR de Alumno">

    <Grid RowDefinitions="*, Auto">

        <!-- 1. La vista de la Cámara -->
        <zxing:CameraBarcodeReaderView Grid.Row="0"
            x:Name="cameraBarcodeReaderView"
            BarcodesDetected="cameraBarcodeReaderView_BarcodesDetected" 
            IsDetecting="{Binding CanScan}"/>

        <!-- 2. Overlay simple -->
        <Border Grid.Row="0"
            Stroke="Red"
            StrokeThickness="4"
            WidthRequest="250"
            HeightRequest="250"
            VerticalOptions="Center"
            HorizontalOptions="Center" />

        <!-- 3. Área de Resultados -->
        <StackLayout Grid.Row="1" Padding="20" Spacing="10" BackgroundColor="#333">
            <Label Text="Resultado del Escaneo:"
                   TextColor="White"
                   FontAttributes="Bold" />
            <Label Text="{Binding ResultadoDelScan}"
                   TextColor="LawnGreen"
                   FontSize="16"
                   HorizontalOptions="Center" />
        </StackLayout>

    </Grid>
</ContentPage>